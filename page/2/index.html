<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/xiaobai0134.github.io/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/xiaobai0134.github.io/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/xiaobai0134.github.io/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/xiaobai0134.github.io/images/logo.svg" color="#222">

<link rel="stylesheet" href="/xiaobai0134.github.io/css/main.css">


<link rel="stylesheet" href="/xiaobai0134.github.io/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('https://xiaobai0134.github.io').hostname,
    root: '/xiaobai0134.github.io/',
    scheme: 'Gemini',
    version: '7.7.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta name="description" content="月圆之夜，紫禁之巅，一剑西来，天外飞仙。">
<meta property="og:type" content="website">
<meta property="og:title" content="小白的博客">
<meta property="og:url" content="https://xiaobai0134.github.io/page/2/index.html">
<meta property="og:site_name" content="小白的博客">
<meta property="og:description" content="月圆之夜，紫禁之巅，一剑西来，天外飞仙。">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="小白">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://xiaobai0134.github.io/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false
  };
</script>

  <title>小白的博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/xiaobai0134.github.io/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">小白的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">月圆之夜，紫禁之巅，一剑西来，天外飞仙。</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-首页">

    <a href="/xiaobai0134.github.io/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-关于">

    <a href="/xiaobai0134.github.io/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
        <li class="menu-item menu-item-标签">

    <a href="/xiaobai0134.github.io/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-分类">

    <a href="/xiaobai0134.github.io/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-归档">

    <a href="/xiaobai0134.github.io/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://xiaobai0134.github.io/2019/01/21/iOS-%E5%AE%9E%E7%8E%B0%E7%AE%80%E6%98%93%E7%9A%84%E8%AE%A1%E7%AE%97%E5%99%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/xiaobai0134.github.io/images/avatar.gif">
      <meta itemprop="name" content="小白">
      <meta itemprop="description" content="月圆之夜，紫禁之巅，一剑西来，天外飞仙。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小白的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/xiaobai0134.github.io/2019/01/21/iOS-%E5%AE%9E%E7%8E%B0%E7%AE%80%E6%98%93%E7%9A%84%E8%AE%A1%E7%AE%97%E5%99%A8/" class="post-title-link" itemprop="url">iOS 实现简易的计算器</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2019-01-21 14:54:15 / 修改时间：14:55:55" itemprop="dateCreated datePublished" datetime="2019-01-21T14:54:15+08:00">2019-01-21</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/xiaobai0134.github.io/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>先看效果：</p>
<p><img src="iOS-%E5%AE%9E%E7%8E%B0%E7%AE%80%E6%98%93%E7%9A%84%E8%AE%A1%E7%AE%97%E5%99%A8/20180811150853539.jpeg" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">主要代码：</span><br><span class="line"></span><br><span class="line">NSDecimalNumber * number1 &#x3D; [NSDecimalNumber decimalNumberWithString ：@“12.5”];             </span><br><span class="line"></span><br><span class="line">NSDecimalNumber * number2 &#x3D; [NSDecimalNumber decimalNumberWithString ：@“2.5”];   </span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 加</span><br><span class="line"></span><br><span class="line">NSDecimalNumber * sumNum &#x3D; [number1 decimalNumberByAdding ：number2]; </span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 减</span><br><span class="line"></span><br><span class="line">NSDecimalNumber * subNum &#x3D; [number1 decimalNumberBySubtracting ：number2]; </span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 乘</span><br><span class="line"></span><br><span class="line">NSDecimalNumber * multiNum &#x3D; [number1 decimalNumberByMultiplyingBy ：number2]; </span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 除</span><br><span class="line"></span><br><span class="line">NSDecimalNumber * dividNum &#x3D; [number1 decimalNumberByDividingBy ：number2];</span><br></pre></td></tr></table></figure>



      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://xiaobai0134.github.io/2019/01/21/iOS%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%9C%AC%E5%9C%B0%E4%BF%9D%E5%AD%98%E5%9B%BE%E7%89%87/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/xiaobai0134.github.io/images/avatar.gif">
      <meta itemprop="name" content="小白">
      <meta itemprop="description" content="月圆之夜，紫禁之巅，一剑西来，天外飞仙。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小白的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/xiaobai0134.github.io/2019/01/21/iOS%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%9C%AC%E5%9C%B0%E4%BF%9D%E5%AD%98%E5%9B%BE%E7%89%87/" class="post-title-link" itemprop="url">iOS学习笔记 -- 本地保存图片</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2019-01-21 14:52:41 / 修改时间：14:53:25" itemprop="dateCreated datePublished" datetime="2019-01-21T14:52:41+08:00">2019-01-21</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/xiaobai0134.github.io/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> 将图片保存到本地</span><br><span class="line">UIImageWriteToSavedPhotosAlbum(img, self , @selector(image:didFinishSavingWithError:contextInfo:), nil);</span><br><span class="line">&#x2F;&#x2F;图片保存成功后调用的方法</span><br><span class="line">- (void)image:(UIImage *)image didFinishSavingWithError:(NSError *)error contextInfo:(void *)contextInfo &#123;</span><br><span class="line">    &#x2F;&#x2F;图片保存成功的事件</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://xiaobai0134.github.io/2019/01/21/iOS%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%A4%9A%E4%B8%AA%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82%E7%9A%84%E5%A4%84%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/xiaobai0134.github.io/images/avatar.gif">
      <meta itemprop="name" content="小白">
      <meta itemprop="description" content="月圆之夜，紫禁之巅，一剑西来，天外飞仙。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小白的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/xiaobai0134.github.io/2019/01/21/iOS%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%A4%9A%E4%B8%AA%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82%E7%9A%84%E5%A4%84%E7%90%86/" class="post-title-link" itemprop="url">iOS学习笔记 -- 多个网络请求的处理</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2019-01-21 14:51:47 / 修改时间：14:52:16" itemprop="dateCreated datePublished" datetime="2019-01-21T14:51:47+08:00">2019-01-21</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/xiaobai0134.github.io/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在开发中，经常可以看见有这样的需求，就是一个方法要等另外一个方法执行完毕再做相对应的处理，比如说一些网络请求，需要根据上一个请求的返回值做相对应的处理再执行第二个请求，所以我们不能让两个请求同时去请求网络。下面通过GCD和NSOperationQueue来处理这个问题。</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">GCD方法：</span><br><span class="line">&#x2F;&#x2F;创建信号量</span><br><span class="line">     __block dispatch_semaphore_t test &#x3D; dispatch_semaphore_create(0);</span><br><span class="line"> </span><br><span class="line">&#x2F;&#x2F;创建队列</span><br><span class="line">        dispatch_queue_t queue &#x3D; dispatch_queue_create(&quot;testBlock&quot;, NULL);</span><br><span class="line">        </span><br><span class="line">        dispatch_async(queue, ^&#123;</span><br><span class="line">            </span><br><span class="line">            for (int i &#x3D; 0; i&lt; 4; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                NSLog(@&quot;i的值是：%d&quot;,i);</span><br><span class="line">                </span><br><span class="line">                tempStr &#x3D; [NSString stringWithFormat:@&quot;%d&quot;,i];</span><br><span class="line">            &#125;</span><br><span class="line">  &#x2F;&#x2F;发送通知</span><br><span class="line">            </span><br><span class="line">            dispatch_semaphore_signal(test);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125;);</span><br><span class="line">        </span><br><span class="line">  &#x2F;&#x2F;信号量等待</span><br><span class="line">        dispatch_semaphore_wait(test, DISPATCH_TIME_FOREVER);</span><br><span class="line">        </span><br><span class="line">        if([tempStr isEqualToString:@&quot;5&quot;])</span><br><span class="line">        &#123;</span><br><span class="line">            for (int j &#x3D; 0; j&lt;5; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                </span><br><span class="line">                NSLog(@&quot;j的值是:%d&quot;,j);</span><br><span class="line">                </span><br><span class="line">                </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">NSOperationQueue 方法</span><br><span class="line"> &#x2F;&#x2F;创建一个队列</span><br><span class="line">        NSOperationQueue * queueeTest &#x3D; [[NSOperationQueue alloc]init];</span><br><span class="line">        </span><br><span class="line"> &#x2F;&#x2F;设置最线程数</span><br><span class="line">        </span><br><span class="line">queueeTest.maxConcurrentOperationCount &#x3D; 4;</span><br><span class="line">        </span><br><span class="line"> &#x2F;&#x2F;创建一个a操作</span><br><span class="line">        NSBlockOperation * optionA &#x3D; [NSBlockOperation blockOperationWithBlock:^&#123;</span><br><span class="line">            </span><br><span class="line">            for (int i &#x3D; 0; i&lt;10000; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                NSLog(@&quot;i的值是:%d&quot;,i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;];</span><br><span class="line">        </span><br><span class="line"> &#x2F;&#x2F;创建一个b操作</span><br><span class="line">        NSBlockOperation * optionB &#x3D; [NSBlockOperation blockOperationWithBlock:^&#123;</span><br><span class="line">            </span><br><span class="line">            for (int j &#x3D; 0; j&lt;20000; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                NSLog(@&quot;j的值是:%d&quot;,j);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;];</span><br><span class="line">        </span><br><span class="line"> &#x2F;&#x2F;B操作依赖于a操作</span><br><span class="line">        [optionB  addDependency:optionA];</span><br><span class="line"> &#x2F;&#x2F;分别加入队列</span><br><span class="line">        </span><br><span class="line">        [queueeTest addOperation:optionA];</span><br><span class="line">        </span><br><span class="line">        [queueeTest addOperation:optionB];</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://xiaobai0134.github.io/2019/01/21/iOS%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-iOS-11-%E5%AF%BC%E8%88%AA%E6%A0%8F%E9%80%8F%E6%98%8E%E8%AE%BE%E7%BD%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/xiaobai0134.github.io/images/avatar.gif">
      <meta itemprop="name" content="小白">
      <meta itemprop="description" content="月圆之夜，紫禁之巅，一剑西来，天外飞仙。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小白的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/xiaobai0134.github.io/2019/01/21/iOS%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-iOS-11-%E5%AF%BC%E8%88%AA%E6%A0%8F%E9%80%8F%E6%98%8E%E8%AE%BE%E7%BD%AE/" class="post-title-link" itemprop="url"> iOS学习笔记--iOS 11 导航栏透明设置</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2019-01-21 14:50:02 / 修改时间：14:51:10" itemprop="dateCreated datePublished" datetime="2019-01-21T14:50:02+08:00">2019-01-21</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/xiaobai0134.github.io/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在项目中做了iOS 11的适配之后发现以前项目中有些地方做了导航栏透明的设置在新系统上失效了。在细查之下发现新系统导航栏的层级结构有所变化。修改方法如下：</span><br></pre></td></tr></table></figure>
<p>iOS 11 以前设置导航栏透明</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[self.navigationController.navigationBar subviews] objectAtIndex:0].alpha &#x3D; 0;</span><br></pre></td></tr></table></figure>
<p>iOS 11 设置导航栏透明</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[[[[self.navigationController.navigationBar subviews] objectAtIndex:0] subviews] objectAtIndex:1].alpha &#x3D; 0;</span><br><span class="line"></span><br><span class="line">[[[[[self.navigationController.navigationBar subviews] objectAtIndex:0] subviews] objectAtIndex:0] setHidden:YES];</span><br></pre></td></tr></table></figure>



<p>仅个人见解，如有错误请见谅！</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://xiaobai0134.github.io/2019/01/21/iOS%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%B0%81%E8%A3%85%E5%80%92%E8%AE%A1%E6%97%B6%E6%8C%89%E9%92%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/xiaobai0134.github.io/images/avatar.gif">
      <meta itemprop="name" content="小白">
      <meta itemprop="description" content="月圆之夜，紫禁之巅，一剑西来，天外飞仙。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小白的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/xiaobai0134.github.io/2019/01/21/iOS%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%B0%81%E8%A3%85%E5%80%92%E8%AE%A1%E6%97%B6%E6%8C%89%E9%92%AE/" class="post-title-link" itemprop="url">iOS学习笔记--封装倒计时按钮</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2019-01-21 14:48:50 / 修改时间：14:49:35" itemprop="dateCreated datePublished" datetime="2019-01-21T14:48:50+08:00">2019-01-21</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/xiaobai0134.github.io/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>倒计时按钮在项目中经常用到，为了使用方便我做了简单的封装。<br>下面直接上代码。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#import &lt;UIKit&#x2F;UIKit.h&gt;</span><br><span class="line"></span><br><span class="line">typedef void(^setBtnAction)();</span><br><span class="line"></span><br><span class="line">@interface countdownButton : UIButton</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;倒计时开始回调</span><br><span class="line">@property(nonatomic,strong)setBtnAction setBtnAction;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">#import &quot;countdownButton.h&quot;</span><br><span class="line"></span><br><span class="line">@interface countdownButton()</span><br><span class="line"></span><br><span class="line">@property(nonatomic,strong)UIButton * btn;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@implementation countdownButton</span><br><span class="line">&#123;</span><br><span class="line">    </span><br><span class="line">    NSInteger secondsCountDown;</span><br><span class="line">    NSTimer * countDownTimer;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line">-(instancetype)initWithFrame:(CGRect)frame</span><br><span class="line">&#123;</span><br><span class="line">    self &#x3D; [super initWithFrame:frame];</span><br><span class="line">    </span><br><span class="line">    if (self)</span><br><span class="line">    &#123;</span><br><span class="line">        secondsCountDown &#x3D; 60;</span><br><span class="line">        </span><br><span class="line">        [self setBtnUI];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    return self;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-(void)setBtnUI</span><br><span class="line">&#123;</span><br><span class="line">    </span><br><span class="line">    [self setBackgroundColor:[UIColor orangeColor]];</span><br><span class="line">    </span><br><span class="line">    [self setTitle:@&quot;获取验证码&quot; forState:UIControlStateNormal];</span><br><span class="line">    </span><br><span class="line">    [self.titleLabel setFont:[UIFont systemFontOfSize:14.0]];</span><br><span class="line">    </span><br><span class="line">    [self addTarget:self action:@selector(countDownAction:) forControlEvents:UIControlEventTouchUpInside];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-(void)countDownAction:(UIButton *)sender</span><br><span class="line">&#123;</span><br><span class="line">    </span><br><span class="line">    [self setTitle:[NSString stringWithFormat:@&quot;%zd s&quot;,secondsCountDown] forState:UIControlStateNormal];</span><br><span class="line">    </span><br><span class="line">    countDownTimer &#x3D; [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(timeFireMethod) userInfo:nil repeats:YES];</span><br><span class="line"></span><br><span class="line">    [self setEnabled:NO];</span><br><span class="line">    </span><br><span class="line">    if(self.setBtnAction)</span><br><span class="line">    &#123;</span><br><span class="line">        self.setBtnAction();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-(void)timeFireMethod</span><br><span class="line">&#123;</span><br><span class="line">    secondsCountDown--;</span><br><span class="line">    </span><br><span class="line">    [self setTitle:[NSString stringWithFormat:@&quot;%zd s&quot;,secondsCountDown] forState:UIControlStateNormal];</span><br><span class="line">    </span><br><span class="line">    if (secondsCountDown&lt;0)</span><br><span class="line">    &#123;</span><br><span class="line">        [countDownTimer invalidate];</span><br><span class="line">        </span><br><span class="line">        [self setEnabled:YES];</span><br><span class="line">        </span><br><span class="line">        [self setTitle:@&quot;获取验证码&quot; forState:UIControlStateNormal];</span><br><span class="line">        </span><br><span class="line">        secondsCountDown &#x3D; 60;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">@end</span><br></pre></td></tr></table></figure>

<p>在需要使用倒计时按钮的地方初始化。<br>这里我在ViewController 中初始化，记得引入头文件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#import &quot;countdownButton.h&quot;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">countdownButton * btn &#x3D; [[countdownButton alloc]initWithFrame:CGRectMake(100, 100, 90, 40)];</span><br><span class="line">   </span><br><span class="line">   [btn setBackgroundColor:[UIColor purpleColor]];</span><br><span class="line">   </span><br><span class="line">   [btn setSetBtnAction:^()&#123;</span><br><span class="line">       </span><br><span class="line">      &#x2F;&#x2F;这里写入倒计时开始时需要执行的事件。</span><br><span class="line">       NSLog(@&quot;倒计时开始&quot;);</span><br><span class="line">       </span><br><span class="line">   &#125;];</span><br><span class="line">   </span><br><span class="line">   [self.view addSubview:btn];</span><br></pre></td></tr></table></figure>

<hr>
<p>demo 地址：<a href="https://github.com/xiaobai0134/XBCountDownButton" target="_blank" rel="noopener">https://github.com/xiaobai0134/XBCountDownButton</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://xiaobai0134.github.io/2019/01/21/iOS%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%AF%E4%BB%98%E9%9B%86%E6%88%90/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/xiaobai0134.github.io/images/avatar.gif">
      <meta itemprop="name" content="小白">
      <meta itemprop="description" content="月圆之夜，紫禁之巅，一剑西来，天外飞仙。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小白的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/xiaobai0134.github.io/2019/01/21/iOS%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%AF%E4%BB%98%E9%9B%86%E6%88%90/" class="post-title-link" itemprop="url">iOS学习笔记--支付宝支付集成</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2019-01-21 14:45:12 / 修改时间：14:45:58" itemprop="dateCreated datePublished" datetime="2019-01-21T14:45:12+08:00">2019-01-21</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/xiaobai0134.github.io/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>最近项目中需要集成支付宝支付功能，在此做一个简单的笔记。<br>集成支付宝支付需要以下几个步骤：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1、申请支付宝支付用到的AppKey；</span><br><span class="line">2、添加支付宝SDK</span><br><span class="line">3、调用方法发送订单信息</span><br><span class="line">4、设置URL Type</span><br><span class="line">5、添加回调方法</span><br></pre></td></tr></table></figure>
<p>第一步在此略过。<br>第二步下载AlipaySDK，下载后文件夹中有AlipaySDK.bundle 和AlipaySDK.framework 两个文件，添加到工程中进行编译，如有缺少的文件，在进行添加。<br>第三步封装订单信息，调用如下方法。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">导入头文件#import &lt;AlipaySDK&#x2F;AlipaySDK.h&gt;</span><br><span class="line"></span><br><span class="line"> NSString *appID &#x3D; 申请的AppID;</span><br><span class="line"> </span><br><span class="line"> NSString *rsa2PrivateKey &#x3D; @&quot;&quot;;</span><br><span class="line"> NSString *rsaPrivateKey &#x3D; @&quot;&quot;;</span><br></pre></td></tr></table></figure>

<p> rsa2PrivateKey 与 rsaPrivateKey 为私钥，只需填入一个，简易用rsa2PrivateKey。获取 rsa2PrivateKey，建议使用支付宝提供的公私钥生成工具生成工具地址：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:&#x2F;&#x2F;doc.open.alipay.com&#x2F;docs&#x2F;doc.htm?treeId&#x3D;291&amp;articleId&#x3D;106097&amp;docType&#x3D;1</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[[AlipaySDK defaultService] payOrder:orderString fromScheme:appScheme callback:^(NSDictionary *resultDic)&#123;</span><br><span class="line">   NSLog(@&quot;reslut &#x3D;&#x3D;&#x3D;&gt;&#x3D; %@&quot;,resultDic);&#125;</span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line">这里需要注意:</span><br><span class="line">   orderString 为订单信息，由后台返回。</span><br><span class="line">   appScheme 为跳转的URL 在Info-plist中定义</span><br></pre></td></tr></table></figure>
<p>第四步设置URL type<br><img src="http://img.blog.csdn.net/20170918163041624?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvTFQxOTkzbHQ0Mjg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>第五步，添加回调方法。在AppDelegate.m中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">- (BOOL)application:(UIApplication *)app openURL:(NSURL *)url options:(NSDictionary&lt;NSString*, id&gt; *)options</span><br><span class="line">&#123;</span><br><span class="line">    if ([url.host isEqualToString:@&quot;safepay&quot;]) &#123;</span><br><span class="line">        &#x2F;&#x2F; 支付跳转支付宝钱包进行支付，处理支付结果</span><br><span class="line">        [[AlipaySDK defaultService] processOrderWithPaymentResult:url standbyCallback:^(NSDictionary *resultDic) &#123;</span><br><span class="line">            NSLog(@&quot;result &#x3D; %@&quot;,resultDic);</span><br><span class="line">        &#125;];</span><br><span class="line">        </span><br><span class="line">        &#x2F;&#x2F; 授权跳转支付宝钱包进行支付，处理支付结果</span><br><span class="line">        [[AlipaySDK defaultService] processAuth_V2Result:url standbyCallback:^(NSDictionary *resultDic) &#123;</span><br><span class="line">            NSLog(@&quot;result &#x3D; %@&quot;,resultDic);</span><br><span class="line">            &#x2F;&#x2F; 解析 auth code</span><br><span class="line">            NSString *result &#x3D; resultDic[@&quot;result&quot;];</span><br><span class="line">            NSString *authCode &#x3D; nil;</span><br><span class="line">            if (result.length&gt;0) &#123;</span><br><span class="line">                NSArray *resultArr &#x3D; [result componentsSeparatedByString:@&quot;&amp;&quot;];</span><br><span class="line">                for (NSString *subResult in resultArr) &#123;</span><br><span class="line">                    if (subResult.length &gt; 10 &amp;&amp; [subResult hasPrefix:@&quot;auth_code&#x3D;&quot;]) &#123;</span><br><span class="line">                        authCode &#x3D; [subResult substringFromIndex:10];</span><br><span class="line">                        break;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            NSLog(@&quot;授权结果 authCode &#x3D; %@&quot;, authCode?:@&quot;&quot;);</span><br><span class="line">        &#125;];</span><br><span class="line">      </span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    return YES;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<p>本文仅供学习，如有错误请见谅！</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://xiaobai0134.github.io/2019/01/21/iOS%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%9B%BE%E7%89%87%E4%B8%8A%E4%BC%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/xiaobai0134.github.io/images/avatar.gif">
      <meta itemprop="name" content="小白">
      <meta itemprop="description" content="月圆之夜，紫禁之巅，一剑西来，天外飞仙。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小白的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/xiaobai0134.github.io/2019/01/21/iOS%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%9B%BE%E7%89%87%E4%B8%8A%E4%BC%A0/" class="post-title-link" itemprop="url">iOS学习笔记--图片上传</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2019-01-21 14:41:26 / 修改时间：14:42:02" itemprop="dateCreated datePublished" datetime="2019-01-21T14:41:26+08:00">2019-01-21</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/xiaobai0134.github.io/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>最近在写项目的时候项遇到到了图片上传的问题，在这里将所用到的方法记录下来。在这里用NSData数据流进行上传。<br>废话不多说直接上代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">当然在上传图片之前还需要在工程中添加AFN库。</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">NSData * imageData &#x3D; UIImageJPEGRepresentation(image, 0.1);</span><br><span class="line">            </span><br><span class="line"> AFHTTPSessionManager *manager &#x3D; [AFHTTPSessionManager manager];</span><br><span class="line">           manager.responseSerializer.acceptableContentTypes &#x3D; [NSSet setWithObjects:@&quot;application&#x2F;json&quot;,</span><br><span class="line">                                                                 @&quot;text&#x2F;html&quot;,</span><br><span class="line">                                                                 @&quot;image&#x2F;jpeg&quot;,</span><br><span class="line">                                                                 @&quot;image&#x2F;png&quot;,</span><br><span class="line">                                                                 @&quot;application&#x2F;octet-stream&quot;,</span><br><span class="line">                                                                 @&quot;text&#x2F;json&quot;,</span><br><span class="line">                                                                 nil];</span><br><span class="line">NSURLSessionDataTask *task &#x3D; [manager POST:KReportImageUrl parameters:dict constructingBodyWithBlock:^(id&lt;AFMultipartFormData&gt;  _Nonnull formData) &#123;</span><br><span class="line">                NSData *imageDatas &#x3D; imageData;</span><br><span class="line">                </span><br><span class="line">                NSDateFormatter *formatter &#x3D; [[NSDateFormatter alloc] init];</span><br><span class="line">                formatter.dateFormat &#x3D; @&quot;yyyyMMddHHmmss&quot;;</span><br><span class="line">                NSString *str &#x3D; [formatter stringFromDate:[NSDate date]];</span><br><span class="line">                NSString *fileName &#x3D; [NSString stringWithFormat:@&quot;%@.jpg&quot;, str];</span><br><span class="line">                &#x2F;&#x2F;上传的参数(上传图片，以文件流的格式)</span><br><span class="line">                [formData appendPartWithFileData:imageDatas</span><br><span class="line">                                            name:@&quot;photo&quot;</span><br><span class="line">                                        fileName:fileName</span><br><span class="line">                                        mimeType:@&quot;image&#x2F;jpeg&quot;];</span><br><span class="line">            &#125; progress:^(NSProgress * _Nonnull uploadProgress) &#123;</span><br><span class="line">                &#x2F;&#x2F;上传进度</span><br><span class="line">                </span><br><span class="line">                NSLog(@&quot;%@&quot;,uploadProgress);</span><br><span class="line">         </span><br><span class="line">            &#125; success:^(NSURLSessionDataTask * _Nonnull task, id  _Nullable responseObject) &#123;</span><br><span class="line">                &#x2F;&#x2F;上传成功</span><br><span class="line">                NSLog(@&quot;上传成功&quot;);</span><br><span class="line"></span><br><span class="line">            &#125; failure:^(NSURLSessionDataTask * _Nullable task, NSError * _Nonnull error) &#123;</span><br><span class="line">                &#x2F;&#x2F;上传失败</span><br><span class="line">                NSLog(@&quot;上传失败&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;%@&quot;,error);</span><br><span class="line">            &#125;];</span><br></pre></td></tr></table></figure>

<hr>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://xiaobai0134.github.io/2019/01/21/iOS%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-tableView%E5%8D%95%E9%80%89%E7%9A%84%E5%AE%9E%E7%8E%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/xiaobai0134.github.io/images/avatar.gif">
      <meta itemprop="name" content="小白">
      <meta itemprop="description" content="月圆之夜，紫禁之巅，一剑西来，天外飞仙。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小白的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/xiaobai0134.github.io/2019/01/21/iOS%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-tableView%E5%8D%95%E9%80%89%E7%9A%84%E5%AE%9E%E7%8E%B0/" class="post-title-link" itemprop="url">iOS学习笔记-- tableView单选的实现</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2019-01-21 14:39:34 / 修改时间：14:41:06" itemprop="dateCreated datePublished" datetime="2019-01-21T14:39:34+08:00">2019-01-21</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/xiaobai0134.github.io/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>在iOS开发中，常常会碰到在列表中实现单选的功能，在tableView中，可以通过其自身来实现。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">在这里定义tagIndex来标记当前选中的行</span><br><span class="line">@property (assign, nonatomic) NSIndexPath *tagIndex;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath这个方法中通过tagIndex来判断当前行是否被选中。</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">if(_tagIndex &#x3D;&#x3D; indexPath)</span><br><span class="line">   &#123;</span><br><span class="line">       cell.accessoryType &#x3D; UITableViewCellAccessoryCheckmark;</span><br><span class="line">   &#125;</span><br><span class="line">   else</span><br><span class="line">   &#123;</span><br><span class="line">   cell.accessoryType &#x3D; UITableViewCellAccessoryNone;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath这个方法中</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;如果是之前选中的，则取消选择</span><br><span class="line">    UITableViewCell *celled &#x3D; [tableView cellForRowAtIndexPath:_tagIndex];</span><br><span class="line">    celled.accessoryType &#x3D; UITableViewCellAccessoryNone;</span><br><span class="line">&#x2F;&#x2F;记录当前选中的位置</span><br><span class="line">    _tagIndex &#x3D; indexPath;</span><br><span class="line">    &#x2F;&#x2F;当前选择的打勾</span><br><span class="line">    UITableViewCell *cell &#x3D; [tableView cellForRowAtIndexPath:indexPath];</span><br><span class="line">    cell.accessoryType &#x3D; UITableViewCellAccessoryCheckmark;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如果想要改变对号的颜色，可用cell.TintColor来设置。</span><br></pre></td></tr></table></figure>

<hr>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://xiaobai0134.github.io/2019/01/21/iOS%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E8%87%AA%E5%AE%9A%E4%B9%89%E9%80%9A%E8%AE%AF%E5%BD%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/xiaobai0134.github.io/images/avatar.gif">
      <meta itemprop="name" content="小白">
      <meta itemprop="description" content="月圆之夜，紫禁之巅，一剑西来，天外飞仙。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小白的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/xiaobai0134.github.io/2019/01/21/iOS%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E8%87%AA%E5%AE%9A%E4%B9%89%E9%80%9A%E8%AE%AF%E5%BD%95/" class="post-title-link" itemprop="url">iOS学习笔记--自定义通讯录</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2019-01-21 14:38:12 / 修改时间：14:38:56" itemprop="dateCreated datePublished" datetime="2019-01-21T14:38:12+08:00">2019-01-21</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/xiaobai0134.github.io/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p> 最近在项目中遇到这样一个问题，在自定义的通讯录中点击索引的时候对应的分组标题改变其状态(如改变其字体颜色、类型、字号等)。在网上找了很长时间但没找到可以使用的，这里有一个写的可以用的拿出来分享一下，写的不好还请见谅！

<p>主要思路：
<p>一、在工程中通过对数据源进行处理，使它们按照汉语拼音进行排序并按照拼音的第一个字母进行分组。

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">如：现在有数据源</span><br><span class="line">   self.tmpNameArr &#x3D; [NSArray arrayWithObjects:@&quot;Aorde&quot;,@&quot;爱旅行的猫&quot;,@&quot;张三丰&quot;,@&quot;张道陵&quot;,@&quot;李太白&quot;,@&quot;八大山人&quot;,@&quot;温庭筠&quot;,@&quot;杜甫&quot;,@&quot;王安石&quot;,@&quot;李白&quot;,@&quot;张三&quot;,@&quot;重庆&quot;,@&quot;重量&quot;,@&quot;调节&quot;,@&quot;调用&quot;,@&quot;小白&quot;,@&quot;小明&quot;,@&quot;千珏&quot;,@&quot;黄家驹&quot;, @&quot;鼠标&quot;,@&quot;hello&quot;,@&quot;多美丽&quot;,@&quot;肯德基&quot;,@&quot;##&quot;,@&quot;e才到家&quot;,@&quot;方米&quot;,@&quot;高明&quot;,@&quot;icd&quot;,@&quot;jeer&quot;,@&quot;米杰&quot;,@&quot;宁宁&quot;,@&quot;盟们&quot;,@&quot;彭明&quot;,@&quot;任港南飞&quot;,@&quot;他宝宝&quot;,@&quot;袁浩&quot;,nil];</span><br><span class="line">   将它们进行分组后，建立2个数组，一个是排序后出现过得品应首字母数组也就是索引数组(indexArray)，一个是排序号的结果数组(letterResultArr)。在这里排序分组用到了网上的ZYPinYinSearchLib 和 BMChineseStringSort。</span><br></pre></td></tr></table></figure>
<p>二、用tableView来展示

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;section的titleHeader</span><br><span class="line">- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section &#123;</span><br><span class="line">    </span><br><span class="line">        return self.indexArray[section];</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;section的titleHeader的高度</span><br><span class="line">-(CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section</span><br><span class="line">&#123;</span><br><span class="line">    return MDXFrom6(15);</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;section行数</span><br><span class="line">-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView&#123;</span><br><span class="line">    </span><br><span class="line">     return self.indexArray.count;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;每组section个数</span><br><span class="line">- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section&#123;</span><br><span class="line">  </span><br><span class="line">    return [self.letterResultArr[section] count];</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;section右侧index数组</span><br><span class="line">&#x2F;&#x2F;右侧索引列表</span><br><span class="line">-(NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView&#123;</span><br><span class="line">       return self.indexArray;</span><br><span class="line">&#125;</span><br><span class="line">-(UITableViewCell * )tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath</span><br><span class="line">&#123;</span><br><span class="line">    static NSString * tongXunLuID &#x3D; @&quot;tongXunLuID&quot;;</span><br><span class="line">    </span><br><span class="line">    tongXuLuTableViewCell * tongXunLuCell &#x3D; [tableView dequeueReusableCellWithIdentifier:tongXunLuID];</span><br><span class="line">    </span><br><span class="line">    if (!tongXunLuCell)</span><br><span class="line">    &#123;</span><br><span class="line">        tongXunLuCell &#x3D; [[tongXuLuTableViewCell alloc]initWithStyle:(UITableViewCellStyleDefault) reuseIdentifier:tongXunLuID];</span><br><span class="line">        </span><br><span class="line">        tongXunLuCell.selectionStyle &#x3D; UITableViewCellSelectionStyleNone;</span><br><span class="line">    &#125;</span><br><span class="line">           Person *p &#x3D; [[self.letterResultArr objectAtIndex:indexPath.section] objectAtIndex:indexPath.row];</span><br><span class="line">        </span><br><span class="line">        [tongXunLuCell.tmpNameLabel setText:[NSString stringWithFormat:@&quot;%@&quot;,p.name]];</span><br><span class="line">    return tongXunLuCell;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath</span><br><span class="line">&#123;</span><br><span class="line">    return MDXFrom6(49);</span><br><span class="line">&#125;</span><br><span class="line">#pragma mark -- tableView点击事件</span><br><span class="line">-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath</span><br><span class="line">&#123;&#x2F;&#x2F;这里是tableViewcell 的点击事件</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>三、点击索引时改变对应section的状态

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">定义一个数组arr，在数据源分组完成后初始化并赋值</span><br><span class="line">    self.arr &#x3D; [NSMutableArray array];</span><br><span class="line">    for (NSInteger i&#x3D;0; i&lt;self.letterResultArr.count; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        [self.arr addObject:@&quot;1&quot;];</span><br><span class="line">    &#125;</span><br><span class="line">设置滑动代理</span><br><span class="line">-(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView&#123;</span><br><span class="line">        [self.arr removeAllObjects];</span><br><span class="line">        for (NSInteger i&#x3D;0; i&lt;self.letterResultArr.count; i++) &#123;</span><br><span class="line">    </span><br><span class="line">            [self.arr addObject:@&quot;1&quot;];</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line">设置点击索引的操作</span><br><span class="line">- (NSInteger)tableView:(UITableView *)tableView sectionForSectionIndexTitle:(NSString *)title atIndex:(NSInteger)index&#123;</span><br><span class="line"> </span><br><span class="line">    [tableView scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:index] atScrollPosition:UITableViewScrollPositionTop animated:YES];</span><br><span class="line">    </span><br><span class="line">    [tableView reloadData];</span><br><span class="line">    NSMutableArray *ar &#x3D; [NSMutableArray arrayWithArray:self.arr];</span><br><span class="line">    [self.arr removeAllObjects];</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;标记    </span><br><span class="line">    for (NSInteger i&#x3D;0; i&lt;ar.count; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        if (i &#x3D;&#x3D; index)</span><br><span class="line">        &#123;</span><br><span class="line">            [self.arr addObject:@&quot;2&quot;];</span><br><span class="line">        &#125;</span><br><span class="line">        else</span><br><span class="line">        &#123;</span><br><span class="line">            [self.arr addObject:@&quot;1&quot;];</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    return index;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">在自定义的view中改变状态</span><br><span class="line">&#x2F;&#x2F;section 自定义</span><br><span class="line">- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section</span><br><span class="line">&#123;</span><br><span class="line">    UIView* myView &#x3D; [[UIView alloc] init];</span><br><span class="line">    myView.backgroundColor &#x3D; RGB_Color(255, 255, 255);</span><br><span class="line">    self.sectionLabel &#x3D; [[UILabel alloc] initWithFrame:CGRectMake(0, 0, KDeviceWidth, MDXFrom6(15))];</span><br><span class="line">    self.sectionLabel.textColor&#x3D;[UIColor blackColor];</span><br><span class="line">    self.sectionLabel.backgroundColor &#x3D; RGB_Color(181, 181, 181);</span><br><span class="line">    [self.sectionLabel setTextAlignment:NSTextAlignmentCenter];</span><br><span class="line">    self.sectionLabel.text&#x3D;[self.indexArray objectAtIndex:section];</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    NSString *mod &#x3D; self.arr[section];</span><br><span class="line">    if ([mod integerValue] &#x3D;&#x3D; 2)</span><br><span class="line">     &#123;</span><br><span class="line">       [self.sectionLabel setTextColor:[UIColor redColor]];</span><br><span class="line">     &#125;</span><br><span class="line">    [myView addSubview:self.sectionLabel];</span><br><span class="line">    </span><br><span class="line">    return myView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://xiaobai0134.github.io/2019/01/21/iOS%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%9B%BE%E7%89%87%E7%81%B0%E5%BA%A6%E5%A4%84%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/xiaobai0134.github.io/images/avatar.gif">
      <meta itemprop="name" content="小白">
      <meta itemprop="description" content="月圆之夜，紫禁之巅，一剑西来，天外飞仙。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小白的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/xiaobai0134.github.io/2019/01/21/iOS%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%9B%BE%E7%89%87%E7%81%B0%E5%BA%A6%E5%A4%84%E7%90%86/" class="post-title-link" itemprop="url">iOS学习笔记--图片灰度处理</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2019-01-21 14:35:56 / 修改时间：14:36:39" itemprop="dateCreated datePublished" datetime="2019-01-21T14:35:56+08:00">2019-01-21</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/xiaobai0134.github.io/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>本文实现将一张彩色图片转换为灰色图片。</p>
<hr>
<p>方法一：通过自定义方法实现。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">+(UIImage*)systemImageToGray:(UIImage*)image</span><br><span class="line">&#123;</span><br><span class="line">    int width &#x3D; image.size.width;</span><br><span class="line">    int height &#x3D; image.size.height;</span><br><span class="line">    </span><br><span class="line">    &#x2F;&#x2F;第一步：开辟颜色空间 </span><br><span class="line">    CGColorSpaceRef colorSpaceRef &#x3D; CGColorSpaceCreateDeviceGray();</span><br><span class="line">    </span><br><span class="line">    &#x2F;&#x2F;第二步：创建颜色空间的上下文 </span><br><span class="line">    CGContextRef contextRef &#x3D; CGBitmapContextCreate(nil, width, height, 8, 0,colorSpaceRef, kCGImageAlphaNone);</span><br><span class="line">    </span><br><span class="line">    if (contextRef &#x3D;&#x3D; nil)</span><br><span class="line">    &#123;</span><br><span class="line">        return nil;</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F;第三步：渲染图片</span><br><span class="line">  CGContextDrawImage(contextRef, CGRectMake(0, 0, width, height), image.CGImage);</span><br><span class="line">    </span><br><span class="line">    &#x2F;&#x2F;第四步：创建图片 将绘制的颜色空间转成CGImage</span><br><span class="line">    CGImageRef grayImageRef &#x3D; CGBitmapContextCreateImage(contextRef);</span><br><span class="line">    </span><br><span class="line">    &#x2F;&#x2F;第五步：将C&#x2F;C++图片转成UIImage</span><br><span class="line">    </span><br><span class="line">    UIImage * newImage &#x3D; [UIImage imageWithCGImage:grayImageRef];</span><br><span class="line">    </span><br><span class="line">    &#x2F;&#x2F;释放内存</span><br><span class="line">    CGColorSpaceRelease(colorSpaceRef);</span><br><span class="line">    CGContextRelease(contextRef);</span><br><span class="line">    CGImageRelease(grayImageRef);</span><br><span class="line">    </span><br><span class="line">    return newImage;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>方法二：通过openCV框架实现。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#import &lt;opencv2&#x2F;opencv.hpp&gt;</span><br><span class="line">#import &lt;opencv2&#x2F;imgcodecs&#x2F;ios.h&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">+(UIImage*)imageToGray:(UIImage *)image</span><br><span class="line">&#123;</span><br><span class="line">    &#x2F;&#x2F;第一步：将ios平台下的图片--&gt;openCV图片</span><br><span class="line">    </span><br><span class="line">    Mat mat_image_color;</span><br><span class="line">    </span><br><span class="line">    UIImageToMat(image, mat_image_color);</span><br><span class="line">    </span><br><span class="line">    &#x2F;&#x2F;第二步：将openCV的图片进行灰度处理</span><br><span class="line">    Mat mat_image_gray;</span><br><span class="line">    &#x2F;&#x2F;参数三：转换类型</span><br><span class="line">    cvtColor(mat_image_color, mat_image_gray, COLOR_RGB2GRAY);</span><br><span class="line">    </span><br><span class="line">    &#x2F;&#x2F;第三步：将灰色图片转成可现实图片</span><br><span class="line">    cvtColor(mat_image_gray, mat_image_color, COLOR_GRAY2RGB);</span><br><span class="line">    </span><br><span class="line">    &#x2F;&#x2F;第四步：将openCV的图片转成ios图片</span><br><span class="line">    </span><br><span class="line">    UIImage * newImage &#x3D; MatToUIImage(mat_image_color);</span><br><span class="line">    </span><br><span class="line">    return newImage;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<p>如有错误请见谅！</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/xiaobai0134.github.io/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/xiaobai0134.github.io/">1</a><span class="page-number current">2</span><a class="page-number" href="/xiaobai0134.github.io/page/3/">3</a><a class="page-number" href="/xiaobai0134.github.io/page/4/">4</a><a class="extend next" rel="next" href="/xiaobai0134.github.io/page/3/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">小白</p>
  <div class="site-description" itemprop="description">月圆之夜，紫禁之巅，一剑西来，天外飞仙。</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/xiaobai0134.github.io/archives">
          <span class="site-state-item-count">38</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/xiaobai0134.github.io/categories/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/xiaobai0134.github.io/tags/">
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/xiaobai0134" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;xiaobai0134" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:191678492@qq.com" title="E-Mail → mailto:191678492@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://blog.csdn.net/yizhiliulangdemiao" title="CSDN → https:&#x2F;&#x2F;blog.csdn.net&#x2F;yizhiliulangdemiao" rel="noopener" target="_blank"><i class="fa fa-fw fa-globe"></i>CSDN</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">小白</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.7.0
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/xiaobai0134.github.io/lib/anime.min.js"></script>
  <script src="/xiaobai0134.github.io/lib/velocity/velocity.min.js"></script>
  <script src="/xiaobai0134.github.io/lib/velocity/velocity.ui.min.js"></script>

<script src="/xiaobai0134.github.io/js/utils.js"></script>

<script src="/xiaobai0134.github.io/js/motion.js"></script>


<script src="/xiaobai0134.github.io/js/schemes/pisces.js"></script>


<script src="/xiaobai0134.github.io/js/next-boot.js"></script>




  















  

  

</body>
</html>
